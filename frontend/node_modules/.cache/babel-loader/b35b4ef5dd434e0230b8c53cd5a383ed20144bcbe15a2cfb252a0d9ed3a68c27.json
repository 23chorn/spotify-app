{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nconst BACKEND_URL = 'http://127.0.0.1:3001';\nexport function useAuthStatus() {\n  _s();\n  const [loggedIn, setLoggedIn] = useState(null);\n  useEffect(() => {\n    const controller = new AbortController();\n    checkAuthStatus(controller.signal);\n    return () => controller.abort();\n  }, []);\n  const checkAuthStatus = async signal => {\n    try {\n      const response = await fetch(`${BACKEND_URL}/api/auth/status`, {\n        credentials: 'include',\n        signal\n      });\n      const data = await response.json();\n      setLoggedIn(data.loggedIn);\n    } catch (error) {\n      if (error.name !== 'AbortError') {\n        console.error('Auth status error:', error);\n        setLoggedIn(false);\n      }\n    }\n  };\n  const logout = async () => {\n    try {\n      const response = await fetch(`${BACKEND_URL}/auth/logout`, {\n        method: 'POST',\n        credentials: 'include'\n      });\n      if (!response.ok) {\n        throw new Error('Logout failed');\n      }\n\n      // After successful logout\n      setLoggedIn(false);\n      // Force a clean reload to reset all state\n      window.location.replace('/');\n    } catch (error) {\n      console.error('Logout failed:', error);\n    }\n  };\n  return {\n    loggedIn,\n    logout\n  };\n}\n_s(useAuthStatus, \"52q5TAFYeNRsNnCUdcEFzNdf7uU=\");","map":{"version":3,"names":["useState","useEffect","BACKEND_URL","useAuthStatus","_s","loggedIn","setLoggedIn","controller","AbortController","checkAuthStatus","signal","abort","response","fetch","credentials","data","json","error","name","console","logout","method","ok","Error","window","location","replace"],"sources":["/Users/chrishorn/Documents/coding/spotify-openai-app/frontend/src/hooks/useAuthStatus.js"],"sourcesContent":["import { useState, useEffect } from 'react';\n\nconst BACKEND_URL = 'http://127.0.0.1:3001';\n\nexport function useAuthStatus() {\n  const [loggedIn, setLoggedIn] = useState(null);\n\n  useEffect(() => {\n    const controller = new AbortController();\n    checkAuthStatus(controller.signal);\n    return () => controller.abort();\n  }, []);\n\n  const checkAuthStatus = async (signal) => {\n    try {\n      const response = await fetch(`${BACKEND_URL}/api/auth/status`, {\n        credentials: 'include',\n        signal\n      });\n      const data = await response.json();\n      setLoggedIn(data.loggedIn);\n    } catch (error) {\n      if (error.name !== 'AbortError') {\n        console.error('Auth status error:', error);\n        setLoggedIn(false);\n      }\n    }\n  };\n\n  const logout = async () => {\n    try {\n      const response = await fetch(`${BACKEND_URL}/auth/logout`, {\n        method: 'POST',\n        credentials: 'include'\n      });\n      \n      if (!response.ok) {\n        throw new Error('Logout failed');\n      }\n      \n      // After successful logout\n      setLoggedIn(false);\n      // Force a clean reload to reset all state\n      window.location.replace('/');\n    } catch (error) {\n      console.error('Logout failed:', error);\n    }\n  };\n\n  return { loggedIn, logout };\n}"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAE3C,MAAMC,WAAW,GAAG,uBAAuB;AAE3C,OAAO,SAASC,aAAaA,CAAA,EAAG;EAAAC,EAAA;EAC9B,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC;EAE9CC,SAAS,CAAC,MAAM;IACd,MAAMM,UAAU,GAAG,IAAIC,eAAe,CAAC,CAAC;IACxCC,eAAe,CAACF,UAAU,CAACG,MAAM,CAAC;IAClC,OAAO,MAAMH,UAAU,CAACI,KAAK,CAAC,CAAC;EACjC,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMF,eAAe,GAAG,MAAOC,MAAM,IAAK;IACxC,IAAI;MACF,MAAME,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGX,WAAW,kBAAkB,EAAE;QAC7DY,WAAW,EAAE,SAAS;QACtBJ;MACF,CAAC,CAAC;MACF,MAAMK,IAAI,GAAG,MAAMH,QAAQ,CAACI,IAAI,CAAC,CAAC;MAClCV,WAAW,CAACS,IAAI,CAACV,QAAQ,CAAC;IAC5B,CAAC,CAAC,OAAOY,KAAK,EAAE;MACd,IAAIA,KAAK,CAACC,IAAI,KAAK,YAAY,EAAE;QAC/BC,OAAO,CAACF,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;QAC1CX,WAAW,CAAC,KAAK,CAAC;MACpB;IACF;EACF,CAAC;EAED,MAAMc,MAAM,GAAG,MAAAA,CAAA,KAAY;IACzB,IAAI;MACF,MAAMR,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGX,WAAW,cAAc,EAAE;QACzDmB,MAAM,EAAE,MAAM;QACdP,WAAW,EAAE;MACf,CAAC,CAAC;MAEF,IAAI,CAACF,QAAQ,CAACU,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAAC,eAAe,CAAC;MAClC;;MAEA;MACAjB,WAAW,CAAC,KAAK,CAAC;MAClB;MACAkB,MAAM,CAACC,QAAQ,CAACC,OAAO,CAAC,GAAG,CAAC;IAC9B,CAAC,CAAC,OAAOT,KAAK,EAAE;MACdE,OAAO,CAACF,KAAK,CAAC,gBAAgB,EAAEA,KAAK,CAAC;IACxC;EACF,CAAC;EAED,OAAO;IAAEZ,QAAQ;IAAEe;EAAO,CAAC;AAC7B;AAAChB,EAAA,CA9CeD,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}