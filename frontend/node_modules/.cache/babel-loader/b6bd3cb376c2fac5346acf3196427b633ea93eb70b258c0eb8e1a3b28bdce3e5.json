{"ast":null,"code":"import React,{useEffect,useState}from'react';import{BrowserRouter as Router,Routes,Route,Navigate,Link}from'react-router-dom';// Set this to your backend LocalTunnel HTTPS URL\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BACKEND_URL='https://salty-words-train.loca.lt';function LoginPage(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"You are not logged in.\"}),/*#__PURE__*/_jsx(\"a\",{href:\"\".concat(BACKEND_URL,\"/auth/login\"),children:/*#__PURE__*/_jsx(\"button\",{children:\"Login with Spotify\"})})]});}function Home(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Welcome, you are logged in!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"You can now explore Spotify features.\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",onClick:()=>window.location.reload(),children:\"Log out\"})]});}function App(){const[loggedIn,setLoggedIn]=useState(null);useEffect(()=>{fetch(\"\".concat(BACKEND_URL,\"/api/auth/status\"),{credentials:'include'// important to send cookies\n}).then(res=>res.json()).then(data=>setLoggedIn(data.loggedIn)).catch(()=>setLoggedIn(false));},[]);if(loggedIn===null)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:loggedIn?/*#__PURE__*/_jsx(Navigate,{to:\"/home\",replace:true}):/*#__PURE__*/_jsx(LoginPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/home\",element:loggedIn?/*#__PURE__*/_jsx(Home,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true})})]})});}export default App;","map":{"version":3,"names":["React","useEffect","useState","BrowserRouter","Router","Routes","Route","Navigate","Link","jsx","_jsx","jsxs","_jsxs","BACKEND_URL","LoginPage","children","href","concat","Home","to","onClick","window","location","reload","App","loggedIn","setLoggedIn","fetch","credentials","then","res","json","data","catch","path","element","replace"],"sources":["/Users/chrishorn/Documents/coding/spotify-openai-app/frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport {\n  BrowserRouter as Router,\n  Routes,\n  Route,\n  Navigate,\n  Link\n} from 'react-router-dom';\n\n// Set this to your backend LocalTunnel HTTPS URL\nconst BACKEND_URL = 'https://salty-words-train.loca.lt';\n\nfunction LoginPage() {\n  return (\n    <div>\n      <h2>You are not logged in.</h2>\n      {/* Use backend LocalTunnel URL for Spotify login */}\n      <a href={`${BACKEND_URL}/auth/login`}>\n        <button>Login with Spotify</button>\n      </a>\n    </div>\n  );\n}\n\nfunction Home() {\n  return (\n    <div>\n      <h1>Welcome, you are logged in!</h1>\n      <p>You can now explore Spotify features.</p>\n      {/* Simple log out: reloads page and resets session */}\n      <Link to=\"/\" onClick={() => window.location.reload()}>Log out</Link>\n    </div>\n  );\n}\n\nfunction App() {\n  const [loggedIn, setLoggedIn] = useState(null);\n\n  useEffect(() => {\n    fetch(`${BACKEND_URL}/api/auth/status`, {\n      credentials: 'include', // important to send cookies\n    })\n      .then(res => res.json())\n      .then(data => setLoggedIn(data.loggedIn))\n      .catch(() => setLoggedIn(false));\n  }, []);\n\n  if (loggedIn === null) return <p>Loading...</p>;\n\n  return (\n    <Router>\n      <Routes>\n        <Route\n          path=\"/\"\n          element={loggedIn ? <Navigate to=\"/home\" replace /> : <LoginPage />}\n        />\n        <Route\n          path=\"/home\"\n          element={loggedIn ? <Home /> : <Navigate to=\"/\" replace />}\n        />\n      </Routes>\n    </Router>\n  );\n}\n\nexport default App;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OACEC,aAAa,GAAI,CAAAC,MAAM,CACvBC,MAAM,CACNC,KAAK,CACLC,QAAQ,CACRC,IAAI,KACC,kBAAkB,CAEzB;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBACA,KAAM,CAAAC,WAAW,CAAG,mCAAmC,CAEvD,QAAS,CAAAC,SAASA,CAAA,CAAG,CACnB,mBACEF,KAAA,QAAAG,QAAA,eACEL,IAAA,OAAAK,QAAA,CAAI,wBAAsB,CAAI,CAAC,cAE/BL,IAAA,MAAGM,IAAI,IAAAC,MAAA,CAAKJ,WAAW,eAAc,CAAAE,QAAA,cACnCL,IAAA,WAAAK,QAAA,CAAQ,oBAAkB,CAAQ,CAAC,CAClC,CAAC,EACD,CAAC,CAEV,CAEA,QAAS,CAAAG,IAAIA,CAAA,CAAG,CACd,mBACEN,KAAA,QAAAG,QAAA,eACEL,IAAA,OAAAK,QAAA,CAAI,6BAA2B,CAAI,CAAC,cACpCL,IAAA,MAAAK,QAAA,CAAG,uCAAqC,CAAG,CAAC,cAE5CL,IAAA,CAACF,IAAI,EAACW,EAAE,CAAC,GAAG,CAACC,OAAO,CAAEA,CAAA,GAAMC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAE,CAAAR,QAAA,CAAC,SAAO,CAAM,CAAC,EACjE,CAAC,CAEV,CAEA,QAAS,CAAAS,GAAGA,CAAA,CAAG,CACb,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGxB,QAAQ,CAAC,IAAI,CAAC,CAE9CD,SAAS,CAAC,IAAM,CACd0B,KAAK,IAAAV,MAAA,CAAIJ,WAAW,qBAAoB,CACtCe,WAAW,CAAE,SAAW;AAC1B,CAAC,CAAC,CACCC,IAAI,CAACC,GAAG,EAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACvBF,IAAI,CAACG,IAAI,EAAIN,WAAW,CAACM,IAAI,CAACP,QAAQ,CAAC,CAAC,CACxCQ,KAAK,CAAC,IAAMP,WAAW,CAAC,KAAK,CAAC,CAAC,CACpC,CAAC,CAAE,EAAE,CAAC,CAEN,GAAID,QAAQ,GAAK,IAAI,CAAE,mBAAOf,IAAA,MAAAK,QAAA,CAAG,YAAU,CAAG,CAAC,CAE/C,mBACEL,IAAA,CAACN,MAAM,EAAAW,QAAA,cACLH,KAAA,CAACP,MAAM,EAAAU,QAAA,eACLL,IAAA,CAACJ,KAAK,EACJ4B,IAAI,CAAC,GAAG,CACRC,OAAO,CAAEV,QAAQ,cAAGf,IAAA,CAACH,QAAQ,EAACY,EAAE,CAAC,OAAO,CAACiB,OAAO,MAAE,CAAC,cAAG1B,IAAA,CAACI,SAAS,GAAE,CAAE,CACrE,CAAC,cACFJ,IAAA,CAACJ,KAAK,EACJ4B,IAAI,CAAC,OAAO,CACZC,OAAO,CAAEV,QAAQ,cAAGf,IAAA,CAACQ,IAAI,GAAE,CAAC,cAAGR,IAAA,CAACH,QAAQ,EAACY,EAAE,CAAC,GAAG,CAACiB,OAAO,MAAE,CAAE,CAC5D,CAAC,EACI,CAAC,CACH,CAAC,CAEb,CAEA,cAAe,CAAAZ,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}